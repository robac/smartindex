<?php

class SmartIndexConf {
    const TREE_CLASS = 'smartindex-treeview';
    const HIGHLITED_CLASS = 'smartindex-highlited';
    
    const PARAM_NAMESPACE = 'namespace';
    const PARAM_DEPTH = 'depth';
    const PARAM_NS_PAGE = 'nspage';
    const PARAM_HIGHLITE = 'highlite';
    
    public $namespace = '';
    public $baseDir = NULL;
    public $recursionLevel = 1;
    public $followPath = '';
    public $treeId = NULL;
    public $nsPage = 'start';
    public $theme = 'smartindex-default';
    
    public $error = NULL;
    
   /* public function readFromTag($match) {
        $params = substr($match, 12, strlen($match)-14);
        preg_match_all('/([a-z]+)="([^"]*)"/i',$conf, $res, PREG_SET_ORDER);
        foreach ($res as $val) {
            switch ($val[1]) {
                
            }
            
            
            if ($val[1]=="namespace") {
                $config->namespace = $val[2];
            }
            
            if ($val[1]=="depth") {
                $config->recursionLevel = $val[2];
            }
            
            if ($val[1]=="pattern") {
                $config->nsPage = $val[2];
            }
            
            if ($val[1]=="theme") {
                $config->theme = "smartindex-".$val[2];
            }
            
            if 
        }
    }*/
    
    public function check() {
        global $conf;
        
        if (is_null($this->baseDir)) {
            $this->baseDir = $conf['datadir'];
        }
        
        if (is_null($this->treeId)) {
            $this->treeId = Utils::getFloatMicrotime("smartindex_");
        }
        
        if ($this->recursionLevel < 1) {
            $this->error = "Chyba recLevel";
        }
    }
    
}